<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>フォーム デモ</title>
  <link rel="stylesheet" href="./css/style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body>
  <!-- サイトの中身全体をid=containerで囲む -->
  <div id="container">

    <!-- ヘッダー -->
    <!-- サイト内のコンテンツ -->

    <section>
      <h2>お問い合わせ</h2>
      <form class="c-form input_form">
        <div class="c-form__item">
          <label class="c-form__label" for="field-name">
            お名前<span class="c-form__required">必須</span>
          </label>
          <input
            class="c-form__input name"
            placeholder="株式会社 山田"
            type="text"
            required="required"
          />
        </div>
        <div class="c-form__item">
          <label class="c-form__label" for="field-mail">
            メールアドレス<span class="c-form__required">必須</span>
          </label>
          <input
            class="c-form__input mail"
            placeholder="sample@gmail.com"
            type="email"
            required="required"
          />
        </div>
        <div class="c-form__item">
          <label class="c-form__label" for="field-message">ご希望期限・公開予定日</label>
          <input
            type="date"
            class="c-form__input date"
          ></textarea>
        </div>
        <div class="c-form__item">
          <label class="c-form__label" for="field-message">
            ご依頼内容<span class="c-form__required">必須</span>
          </label>
          <textarea
            class="c-form__input message"
            placeholder="お問い合わせ内容"
            required="required"
          ></textarea>
        </div>
        <div class="c-form__submit">
          <button class="confirm_btn" type="submit">確認画面へ</button>
        </div>
      </form>
    </section>

    <!-- フッター等 -->
  </div>

  <!-- 確認画面 -->
  <div id="confirm">
    <h2>確認画面</h2>
    <form class="c-form"
      action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSd2Nur3qk3Nc4YOU4Me3L4LLMDVfF8wju-EqmtxuwvodMas4w/formResponse"
      method="POST"
      target="hidden_iframe"
      onsubmit="submitted=true;"
      class="c-form"
      >
      <div class="c-form__item">
        <label class="c-form__label" for="field-name">
          お名前<span class="c-form__required">必須</span>
        </label>
        <input
          name="entry.1925196887"
          class="c-form__input"
          id="field-name"
          placeholder="株式会社 山田"
          type="text"
          required="required"
        />
      </div>
      <div class="c-form__item">
        <label class="c-form__label" for="field-mail">
          メールアドレス<span class="c-form__required">必須</span>
        </label>
        <input
          name="entry.513046151"
          class="c-form__input"
          id="field-mail"
          placeholder="sample@gmail.com"
          type="email"
          required="required"
        />
      </div>
      <div class="c-form__item">
        <label class="c-form__label" for="field-message">ご希望期限・公開予定日</label>
        <input
          name="entry.1551892459"
          type="date"
          class="c-form__input"
          id="field-date"
        ></textarea>
      </div>
      <div class="c-form__item">
        <label class="c-form__label" for="field-message">
          ご依頼内容<span class="c-form__required">必須</span>
        </label>
        <textarea
          name="entry.934550159"
          class="c-form__input"
          id="field-message"
          placeholder="お問い合わせ内容"
          required="required"
        ></textarea>
      </div>
      <div class="c-form__submit">
        <button type="submit">送信する</button>
      </div>
    </form>
  </div>

  <script type="text/javascript">
    let submitted = false;
  </script>
  <iframe
      name="hidden_iframe"
      id="hidden_iframe"
      style="display: none"
      onload="if(submitted){window.location='thanks.html';}"
  ></iframe>

  <script>
    $(function () {
      $('#container .input_form').on('submit', function(event) {
        event.preventDefault();

        // 各項目の入力内容を取得
        let name = $('#container .c-form .name').val()
        let mail = $('#container .c-form .mail').val()
        let date = $('#container .c-form .date').val()
        let message = $('#container .c-form .message').val()

        // 必須項目に入力がされていたら
        if (name && mail && message) {
          $('#container').hide() // サイトのコンテンツを非表示に
          $('#confirm').show() // 確認画面の表示

          // 確認画面の各項目に、入力された内容を反映
          $('#field-name').val(name)
          $('#field-mail').val(mail)
          $('#field-date').val(date)
          $('#field-message').val(message)
        }
      })
    })
  </script>
</body>
</html>